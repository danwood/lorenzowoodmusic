extends ../_layout.pug

block prelude
	|<?php
	|require_once('../classes/downcode.php');
	|$db = new DowncodeDB();
	|$release = $db->featuredRelease(2);
	|
	|$now = new DateTime(isset($_GET['ymd']) ? $_GET['ymd'] : 'now');
	|$releaseDate = $now;	// default to now, so it should show up as released
	|if ($release) {
	|	$releaseDateString = NULL;
	|	if (!empty($release['release_date'])) {
	|		$releaseDate = new DateTime($release['release_date'], new DateTimeZone('America/New_York'));
	|		if ($now < $releaseDate) $releaseDateString = $releaseDate->format('l, F jS');
	|	}
	|	$oneMonthAgo = new \DateTime('1 month ago');
	|}
	|?>


block vars
	- var herostyle = 'covering'
	- var pageTitle = '2AM in the Basement'
	- var currentClass = '2am'
	- var description = '2AM in the Basement is a side project of musician Lorenzo Wood featuring covers of songs by some of Lorenzo‘s favorite artists.'

block title
	title 2AM in the Basement — Official Site
	
block append links
	link(rel="prefetch" href="//code.jquery.com")
		//- This should be done on any page using jquery - ONLY HOME PAGE & 2AM PAGE
	link(rel="prefetch" href="//img.youtube.com")
		//- This should be done on any page showing YOUTUBE VIDEOS

block logo
	a.filled(href="/", class={active: currentClass === '2am'}, style="color:pink")
		//- include the SVG inline since it's only used here
		include ../svg/2am.svg

//- REMINDER: DASH AFTER SLASH-SLASH HIDES COMMENTS FROM PUG COMPILER

//-.info(style="position:absolute; top:0; left:0; width:100%; height:20px; color:red;z-index:9999")

block append header
	.hero

		<?php if ($release) { ?>
		.action-banner.clearfix.safe-area-only(style="background:rgba(255,255,255,0.4")
			p
				<a target="_blank" href="/link/<?php echo htmlentities($release['slug'], ENT_QUOTES); ?>">
					<img style="display:inline-block; width:32px; height:auto; padding:0;" src="<?php echo htmlentities($db->pathCDNForImageSize($release, 64), ENT_QUOTES); ?>" alt="<?php echo htmlentities($release['title'], ENT_QUOTES); ?>, cover image" />
				</a>
				span <?php echo htmlspecialchars( $now < $releaseDate ? 'Upcoming' : ($releaseDate < $oneMonthAgo ? 'Latest' : 'New') . ' ' . $release['release_type_name'] . ' “' . $release['title'] . '”'); ?> —
					| &nbsp;
				b
					<a style="text-decoration:underline" href="/link/<?php echo htmlentities($release['slug'], ENT_QUOTES); ?>"><?php echo ($now < $releaseDate) ? 'Pre-Save or Pre-Order Now!' : 'Download or stream now!'; ?></a>
		<?php } ?>

		picture
			source(srcset=cloudPrefix + "img/2am.webp 1920w" type="image/webp")
			source(srcset=cloudPrefix + "img/2am.jpg 1920w, " + cloudPrefix + "img/2am50.jpg 960w, " + cloudPrefix + "img/2am33.jpg 640w")
			img.hero-image.covering(src=cloudPrefix + "img/2am.jpg" loading="eager" alt="2AM in the Basement")

block main


	section.bio

		header.ir(aria-hidden="true")
			h2 Bio
		article.textual

			//- Try to match meta description above with text below

			p.
				2AM in the Basement is a side project of musician <a href="./">Lorenzo Wood</a> featuring covers of songs by some of Lorenzo's favorite artists.

			p Find 2AM in the Basement songs online:
			.icons.icons-2
				a.smaller(data-title="Apple Music" href="https://geo.itunes.apple.com/us/artist/2am-in-the-basement/1461919405?at=1000lKSp")
					svg: use(xlink:href="/svg/homepage.svg#apple-music-color")
				a(data-title="Spotify" href="https://open.spotify.com/artist/4xWrKxTS7gyybHbJ94LZtx?si=P5Cy1GEHS8aLFNkjsFAx_Q" style="fill:#1ED760")
					svg: use(xlink:href="/svg/homepage.svg#spotify")

	section.videos.clearfix

		header.ir(aria-hidden="true")
			h2 Releases so far

		article.clearfix

			.youtube-column-2
				.youtube-border
					.youtube(data-code='PfjIqix5ZZw' data-title='Heartless (Diplo & Morgan Wallen) Cover by 2AM In The Basement')
			.youtube-column-2
				.youtube-border
					.youtube.square-video(data-code='21RcD1TRKv4' data-title='Old Town Road')




block additional-html

	#scroll-arrow.scrolldown.bounce(style="display:none; stroke:white")
		a.down-arrow(href="#")
			svg: use(xlink:href="/svg/homepage.svg#downarrow")


//- NOTE THAT HOME PAGE & 2AM PAGE ARE ONLY PAGES USING JQUERY

block prepend scripts
	script(
		src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
		crossorigin="anonymous")
	script.
		window.jQuery || document.write('<script src="/js/vendor/jquery-3.5.1.min.js"><\\/script>')
	script
		include ../js/hero-min.js
		include ../js/youtube-min.js
	<script type="application/ld+json">{"@context":"http://schema.org","@type":"Person","name":"2AM in the Basement","url":"https://www.lorenzowoodmusic.com/2am-in-the-basement/","sameAs":["https://www.amazon.com/dp/B07R5Q4NJ3/ref=dm_ws_ps_adp", "https://twitter.com/2am_basement", "https://listen.tidal.com/artist/17766004", "https://music.apple.com/us/artist/2am-in-the-basement/1461919405?at=1000lKSp", "https://open.spotify.com/artist/4xWrKxTS7gyybHbJ94LZtx"]}</script>


